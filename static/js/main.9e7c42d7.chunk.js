(this["webpackJsonpangry-birds"]=this["webpackJsonpangry-birds"]||[]).push([[0],{15:function(n,t,e){},17:function(n,t,e){"use strict";e.r(t);var r={};e.r(r),e.d(r,"ActionType",(function(){return b})),e.d(r,"updateBounds",(function(){return p})),e.d(r,"mouseDownBird",(function(){return j})),e.d(r,"mouseMove",(function(){return y})),e.d(r,"mouseUp",(function(){return w})),e.d(r,"launch",(function(){return x})),e.d(r,"updateAnim",(function(){return g})),e.d(r,"completeAnim",(function(){return M})),e.d(r,"reset",(function(){return O}));var o={};e.r(o),e.d(o,"launchPos",(function(){return R})),e.d(o,"birdPos",(function(){return C})),e.d(o,"sling",(function(){return E})),e.d(o,"canReset",(function(){return N})),e.d(o,"canInteract",(function(){return q})),e.d(o,"readyToLaunch",(function(){return F})),e.d(o,"trajectoryPath",(function(){return T})),e.d(o,"animDuration",(function(){return z})),e.d(o,"animFn",(function(){return J}));var u=e(1),i=e.n(u),a=e(7),c=e.n(a),s=(e(15),e(3)),d=e(8),f=e(9),h=function(){function n(t,e){Object(d.a)(this,n),this.x=t,this.y=e}return Object(f.a)(n,[{key:"plus",value:function(t){return new n(this.x+t.x,this.y+t.y)}},{key:"minus",value:function(t){return new n(this.x-t.x,this.y-t.y)}},{key:"scale",value:function(t){return new n(t*this.x,t*this.y)}},{key:"magnitude",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"toPc",value:function(t,e){return new n(this.x/t,this.y/e)}},{key:"fromPc",value:function(t,e){return new n(this.x*t,this.y*e)}}]),n}(),m=1e3;function l(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return t.map((function(n){return n&&"object"===typeof n?Object.keys(n).filter((function(t){return n[t]})).join(" "):String(n)})).join(" ")}var b,v=e(2);function p(n){return{type:b.UpdateBounds,payload:n}}function j(){return{type:b.MouseDownBird}}function y(n){return{type:b.MouseMove,payload:n}}function w(){return{type:b.MouseUp}}function x(){return{type:b.Launch}}function g(n){return{type:b.UpdateAnim,payload:n}}function M(n){return{type:b.CompleteAnim,payload:n}}function O(){return{type:b.Reset}}function P(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.UpdateBounds:return A(n,t.payload);case b.MouseDownBird:return S(n);case b.MouseMove:return B(n,t.payload);case b.MouseUp:return D(n);case b.Launch:return U(n);case b.UpdateAnim:return L(n,t.payload);case b.CompleteAnim:return I(n,t.payload);case b.Reset:return k(n);default:return n}}function A(n,t){return Object(v.a)(Object(v.a)({},n),{},{bounds:t})}function S(n){return n.animStatus!==X.Interactive?n:Object(v.a)(Object(v.a)({},n),{},{dragSubject:Q.Bird})}function B(n,t){return n.dragSubject===Q.None?n:Object(v.a)(Object(v.a)({},n),{},{birdPos:t})}function D(n){return Object(v.a)(Object(v.a)({},n),{},{dragSubject:Q.None})}function U(n){return Object(v.a)(Object(v.a)({},n),{},{animStatus:X.Animating})}function L(n,t){return Object(v.a)(Object(v.a)({},n),{},{time:t})}function I(n,t){return Object(v.a)(Object(v.a)({},n),{},{time:t,animStatus:X.Done})}function k(n){return Object(v.a)(Object(v.a)({},n),{},{birdPos:G,time:0,animStatus:X.Interactive})}function R(n){var t=n.bounds,e=t.width,r=t.height;return G.fromPc(e,r)}function C(n){var t=n.bounds,e=t.width,r=t.height;return n.animStatus===X.Interactive?n.birdPos.fromPc(e,r):(0,Y(n).animFn)(n.time).birdPos}function E(n){var t=n.bounds,e=t.width,r=t.height;if(n.animStatus===X.Interactive)return n.birdPos.fromPc(e,r);var o=(0,Y(n).animFn)(n.time),u=o.showSling,i=o.birdPos;return u?i:void 0}function N(n){return n.animStatus===X.Done}function q(n){return n.animStatus===X.Interactive}function F(n){return n.dragSubject===Q.Bird}function T(n){var t=Y(n),e=t.root1,r=t.root2,o=t.control;return"M ".concat(e.x," ").concat(e.y,"\n          Q ").concat(o.x," ").concat(o.y,",\n            ").concat(r.x," ").concat(r.y)}function z(n){return Y(n).animDuration}function J(n){return Y(n).animFn}!function(n){n.UpdateBounds="UpdateBounds",n.MouseDownBird="MouseDownBird",n.MouseMove="MouseMove",n.MouseUp="MouseUp",n.UpdateAnim="UpdateAnim",n.Launch="Launch",n.CompleteAnim="CompleteAnim",n.Reset="Reset"}(b||(b={}));var Q,X,Y=function(){var n,t={birdPos:void 0,bounds:void 0};return function(e){if(n&&e.birdPos===t.birdPos&&e.bounds===t.bounds)return n;t={birdPos:e.birdPos,bounds:e.bounds};var r=e.bounds,o=r.width,u=r.height;return n=function(n,t){var e=t.minus(n),r=Math.atan2(e.y,e.x),o=Math.sqrt(30)*e.magnitude(),u=o*Math.cos(r),i=o*Math.sin(r),a=Math.sqrt(Math.pow(i,2)+2e3*t.y),c=(i+a)/m,s=i/m,d=u*((i-a)/m)+t.x,f=u*c+t.x,l=(d+f)/2,b=2*(-500*Math.pow(s,2)+i*s+t.y),v=new h(d,0),p=new h(f,0),j=new h(l,b),y=Math.PI/2*Math.sqrt(1/30);return{root1:v,root2:p,control:j,animFn:function(r){if(r<=y){var o=1-Math.cos(Math.sqrt(30)*r);return{showSling:!0,birdPos:n.plus(e.scale(o))}}var a=r-y,c=u*a+t.x,s=-500*Math.pow(a,2)+i*a+t.y;return{showSling:!1,birdPos:new h(c,s)}},animDuration:y+c}}(e.birdPos.fromPc(o,u),R(e))}}();!function(n){n.None="None",n.Bird="Bird"}(Q||(Q={})),function(n){n.Interactive="Interactive",n.Animating="Animating",n.Done="Done"}(X||(X={}));var G=new h(-.35,.2),H={bounds:{width:0,height:0,left:0,top:0},birdPos:G,dragSubject:Q.None,animStatus:X.Interactive,time:0},K=i.a.createContext({state:null,dispatch:null});function V(){return function(n,t){return function(e){e.type===r.ActionType.MouseUp&&o.readyToLaunch(n)&&(t(r.launch()),function(n,t){var e;function o(u){e||(e=u);var i=(u-e)/1e3;i>=n?t(r.completeAnim(n)):(requestAnimationFrame(o),t(r.updateAnim(i)))}requestAnimationFrame(o),t(r.updateAnim(0))}(o.animDuration(n),t)),t(e)}}}var W=e(10);var Z=e(0),$=function(n){var t=n.pos,e=n.interactive,r=n.onMouseDown;return Object(Z.jsx)("circle",{className:l("bird",{interactive:e}),onMouseDown:r,cx:t.x,cy:t.y,r:"13"})},_=function(n){var t=n.launchPos,e=n.slingPos;return Object(Z.jsxs)("g",{className:"sling-shot",children:[Object(Z.jsx)("line",{x1:t.x,y1:"0",x2:t.x,y2:t.y}),e&&Object(Z.jsx)("line",{x1:t.x,y1:t.y,x2:e.x,y2:e.y})]})},nn=function(){var n=i.a.useContext(K),t=n.state,e=n.dispatch,u=i.a.useRef(null),a=function(n,t){var e=i.a.useState({width:0,height:0,left:0,top:0}),r=Object(s.a)(e,2),o=r[0],u=r[1],a=i.a.useRef(t),c=i.a.useCallback((function(){if(n.current){var t=n.current.getBoundingClientRect(),e=t.width,r=t.height,o=t.left,i=t.top;u({width:e,height:r,left:o,top:i}),a.current({width:e,height:r,left:o,top:i})}}),[n,a]);return i.a.useLayoutEffect((function(){return c(),window.addEventListener("resize",c),function(){return window.removeEventListener("resize",c)}}),[c]),o}(u,(function(n){return e(r.updateBounds(n))})),c=a.width,d=a.height,f="translate(".concat(c/2," ").concat(d,") scale(1 -1)");!function(n,t){i.a.useLayoutEffect((function(){function e(e){var r=e.clientX,o=e.clientY,u=n.left,i=n.top;t.onMove(new h(r-u,o-i))}function r(){t.onUp()}return document.addEventListener("mousemove",e),document.addEventListener("mouseup",r),function(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",r)}}),[n,t])}(a,{onMove:function(n){return e(r.mouseMove(new h(n.x-c/2,d-n.y).toPc(c,d)))},onUp:function(){return e(r.mouseUp())}});var m=o.launchPos(t),l=o.birdPos(t),b=o.sling(t),v=o.trajectoryPath(t),p=o.canInteract(t);return Object(Z.jsx)("svg",{className:"canvas",ref:u,children:Object(Z.jsxs)("g",{transform:f,children:[Object(Z.jsx)(_,{launchPos:m,slingPos:b}),Object(Z.jsx)("path",{className:"trajectory",d:v}),Object(Z.jsx)($,{pos:l,interactive:p,onMouseDown:function(){return e(r.mouseDownBird())}})]})})},tn=function(){var n=i.a.useContext(K),t=n.state,e=n.dispatch;return Object(Z.jsx)("nav",{id:"controls",children:Object(Z.jsx)("button",{onClick:function(){return e(r.reset())},disabled:!o.canReset(t),children:"Reset"})})},en=function(){var n=function(n,t){for(var e=arguments.length,r=new Array(e>2?e-2:0),o=2;o<e;o++)r[o-2]=arguments[o];var u=i.a.useReducer(n,t),a=Object(s.a)(u,2),c=a[0],d=a[1];return(r=Object(W.a)(r)).reverse(),r.forEach((function(n){d=n(c,d)})),[c,d]}(P,H,V()),t=Object(s.a)(n,2),e=t[0],r=t[1];return Object(Z.jsx)(K.Provider,{value:{state:e,dispatch:r},children:Object(Z.jsxs)("main",{children:[Object(Z.jsx)(nn,{}),Object(Z.jsx)(tn,{})]})})};c.a.render(Object(Z.jsx)(i.a.StrictMode,{children:Object(Z.jsx)(en,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.9e7c42d7.chunk.js.map